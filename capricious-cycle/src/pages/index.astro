---
import { getCourses } from '../lib/notion.js';
import { supabase } from '../lib/supabase.js';

import Navbar from '../components/home/Navbar.astro';
import HeroBanner from '../components/home/HeroBanner.astro';
import EntryCards from '../components/home/EntryCards.astro';
import SimpleIntro from '../components/home/SimpleIntro.astro';
import PlatformIntro from '../components/home/PlatformIntro.astro';
import Events from '../components/home/Events.astro';
import Footer from '../components/home/Footer.astro';

const courses = await getCourses();
const { data: sessionData, error: sessionError } = await supabase.auth.getSession();
---

<!--
  📄 页面名称：首页
  📍 页面路径：/
  📦 所属模块：公共展示
  🎯 页面功能：
    - 展示课程入口
    - 测试 Supabase 用户连接状态
    - 提交和查询 xAPI 学习记录（用于测试用途）

  🎨 组件依赖：
    - 无（页面内直接渲染）

  🧩 页面意义：
    - 课程平台主入口，用户首次访问展示核心信息
    - 用于后续转化和功能入口跳转

  🧠 注意事项：
    - 当前页面以测试逻辑为主，后续可能替换为真正的首页内容（如 Hero、CTA、导航等）

  🧱 当前首页组件结构（v1.0）：
    - Navbar                 // 顶部导航栏（Logo + 登录注册）
    - HeroBanner            // 头部宣传图与按钮（→ 登录注册页）
    - EntryCards            // 功能入口卡片区（如藏语入门/文化/旅游）
    - SimpleIntro           // 简单藏语介绍（原课程预览按钮）
    - PlatformIntro         // 平台介绍说明（→ 登录注册页）
    - Events                // 活动区（暂未启用）
    - Footer                // 页脚信息栏
-->

<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <title>课程列表</title>
  </head>
  <body>
    <main class="min-h-screen bg-white text-gray-900 px-8 py-12">
      <Navbar />
      <HeroBanner />
      <EntryCards />
      <SimpleIntro />
      <PlatformIntro />
      <Events />

      <Footer />
    </main>
  </body>
</html>
