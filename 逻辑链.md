
# 七大核心系统对应表

| 核心系统                     | 下属小板块                         | 技术路线实现方式                         | 可行性     | 备注                             |
| ---------------------------- | ---------------------------------- | ---------------------------------------- | ---------- | -------------------------------- |
| **1. 内容管理系统（CMS 同步层）** | Notion 同步服务                    | B-8 & B-9：Notion 数据库按 Schema 创建 & 导出脚本实施 | 可行       | 依赖 Notion API                  |
|                              | 数据清洗与映射                     | B-9：同步脚本中添加清洗逻辑              | 可行       |                                  |
|                              | 内容存储（R2 + D1 + KV）           | B-4：创建 R2、KV、D1 实例               | 可行       |                                  |
|                              | 版本控制与历史记录                 | B-5：IaC + Git 管理资源                  | 可行       |                                  |
|                              | 内容发布接口                       | B-12：实现构建时/运行时 API 路由         | 可行       |                                  |
| **2. 前端 UI 系统**          | 页面框架                           | B-1 & B-12：Astro 基础模板 + 路由        | 可行       |                                  |
|                              | 组件库                             | MVP-0 阶段通过 shadcn/ui 定制           | 可行       |                                  |
|                              | 状态管理                           | C-4：Supabase Auth 结合前端状态管理     | 可行       |                                  |
|                              | i18n/a11y/响应式                   | B-2：Tailwind + Astro 插件               | 可行       |                                  |
| **3. 后端 API 系统**         | 认证授权 API                       | C-4：Supabase Auth + 中间件             | 可行       |                                  |
|                              | 内容服务 API                       | B-12：课程列表/详情路由                  | 可行       |                                  |
|                              | 学习进度 API                       | B-10 & B-12：xAPI LRS 接口               | 可行       |                                  |
|                              | 支付回调 API                       | C-2 & C-3：Stripe Checkout + Webhook     | 可行       |                                  |
|                              | 管理后台 API                       | P1 阶段规划中                           | 待定       | G-3/G-4：Directus 与 Next.js     |
| **4. 数据存储系统**          | 主业务数据库 (Postgres)            | A-3 & G-1：Supabase Pro 项目             | 可行       |                                  |
|                              | 进度存储 (Cloudflare D1)          | B-4 & B-10：D1 实例 + xAPI               | 可行       |                                  |
|                              | 静态资源 (R2)                     | B-4：R2 实例                             | 可行       |                                  |
|                              | 缓存层 (KV)                       | B-4：KV 实例                             | 可行       |                                  |
| **5. 安全认证系统**          | 密码哈希 / OAuth                   | C-4：Supabase Auth                      | 可行       |                                  |
|                              | JWT 管理                           | C-4：内置 Token 刷新 & 黑名单            | 可行       |                                  |
|                              | ACL/RBAC                           | 后端中间件阶段                           | 待定       |                                  |
|                              | CSRF/XSS 防御                     | CI 检查 + Sentry 监控                    | 可行       |                                  |
| **6. 支付变现系统**          | 订单创建                           | C-2：Stripe Dashboard 配置              | 可行       |                                  |
|                              | 支付流程                           | C-2：Checkout                               | 可行       |                                  |
|                              | Webhook 处理                       | C-3：Queue 写入 D1                    | 可行       |                                  |
|                              | 对账与通知                         | F-4：监控漏斗 & 通知                      | 可行       |                                  |
| **7. 监控与运维系统**        | 日志收集                           | E-3：Sentry + Logflare 集成              | 可行       |                                  |
|                              | 性能监控                           | E-4：Cloudflare Analytics Dashboard      | 可行       |                                  |
|                              | 告警与通知                         | E-5：KPI 漏斗追踪                         | 可行       |                                  |
|                              | CI/CD 流程                        | B-6 & B-14：GitHub Actions + Playwright  | 可行       |                                  |

> **无法实现或暂缓**：  
>
> - H5P 相关功能在 MVP-0 中保留 CLI 支持（B-11），但因资源优先级暂缓使用。  
> - 管理后台 API（部分高级权限管理）与 ACL/RBAC 细节将在 Phase-1（G-3/G-4）及后续迭代中完善。
